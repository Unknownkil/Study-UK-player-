<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyUKplayer</title>
    <script src="https://cdn.jwplayer.com/libraries/IDzF9Zmk.js"></script>
    <style>
        /* Add some custom styles for a professional look */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            max-width: 800px;
            width: 100%;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            border-radius: 10px;
        }
        h2 {
            text-align: center;
            color: #333;
        }
        #player {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>Welcome to StudyUK player</h2>

        <!-- The JWPlayer container -->
        <div id="player"></div>
    </div>

    <script>
        // Function to get query parameter value by name
        function getQueryParam(param) {
            var urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Base64 Decode function
        function base64Decode(str) {
            return decodeURIComponent(escape(atob(str)));
        }

        // Main function to initialize and configure JWPlayer
        function setupJWPlayer() {
            var encodedUrl = getQueryParam('url');
            if (encodedUrl) {
                var hlsUrl = base64Decode(encodedUrl);

                // JWPlayer configuration
                jwplayer("player").setup({
                    file: hlsUrl,
                    width: "100%",
                    aspectratio: "16:9",
                    autostart: false, // Change to true if you want autostart
                    controls: true,
                    playbackRateControls: [0.5, 1, 1.5, 2], // Playback speed control
                    skin: {
                        name: "seven" // You can change this skin to customize UI more
                    },
                    captions: {
                        color: "#FFFFFF",
                        fontSize: 16,
                        backgroundOpacity: 0,
                        edgeStyle: "raised"
                    },
                    // Adding quality options
                    qualityLabels: {
                        "1080": "1080p",
                        "720": "720p",
                        "480": "480p",
                        "360": "360p"
                    }
                });

                // Listener for handling quality changes
                jwplayer().on('levelsChanged', function(event) {
                    console.log('Quality level changed to', event.level.label);
                });

            } else {
                alert("No URL parameter found!");
            }
        }

        // Call the function on page load
        setupJWPlayer();
    </script>

</body>
</html>